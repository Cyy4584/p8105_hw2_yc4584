p8105_hw2_yc4584
================
Yingyu Cui
2024-09-30

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

# Problem 1: NYC Transit Data

Read and clean the data

``` r
subway_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = "") |> 
  janitor::clean_names() |> 
  select(line:entry, vending, ada) |>
  mutate(entry = case_match(entry, 
                            "YES" ~ TRUE,
                            "NO" ~ FALSE))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

For this data set, it contains the variables “line”, “station_name”,
“routes”, “station_latitude”, “station_longitude”, “entrance_type”,
“entry”, “vending” and “ada” columns. The “line”, “station_name”,
“route1-7”, “entrance_type” and “vending” are character variables, the
“station_latitude”, “station_longitude”, “route8-11” are numeric
variables, and the “entry” and “ada” are logical variables. For data
cleaning, I used the janitor package to clean the column names and the
select function to select the columns I need. I also used the case_match
function to convert the “entry” column to logical variables. The
dimension of the cleaned data set is 1868 rows and 19 columns. Except
the columns of routes belonging to different kinds of variables, I think
the data set is pretty much clean.

Question1:

``` r
distinct_stations = subway_df |> 
  distinct(line, station_name)
num_distinct_stations = nrow(distinct_stations)
print(num_distinct_stations)
```

    ## [1] 465

There are 465 distinct stations in the data set.

Question2:

``` r
num_ada_compliance = subway_df |> 
  filter(ada == "TRUE") |> 
  nrow()
print(num_ada_compliance)
```

    ## [1] 468

Therefore, 468 stations are ADA compliant.

Question3:

``` r
num_without_vending = subway_df |> 
  filter(vending == "NO" & entry == "TRUE") |> 
  nrow()
print(num_without_vending)
```

    ## [1] 69

Therefore, the proportion is 69/1867 = 0.037.

Reformat data so that route number and route name are distinct
variables.

``` r
subway_df_reformat = subway_df |> 
  mutate(across(starts_with("route"), as.character)) |> 
  pivot_longer(cols = starts_with("route"),
               names_to = "route_number", 
               values_to = "route_name",
               values_drop_na = TRUE)
```

How many serve the A train?

``` r
num_A_train = subway_df_reformat |> 
  filter(route_name == "A") |> 
  distinct(line, station_name) |> 
  nrow()
print(num_A_train)
```

    ## [1] 60

Therefore,60 distinct stations serve the A train.

Of the stations that serve the A train, how many are ADA compliant?

``` r
num_A_train_ADA = subway_df_reformat |> 
  filter(route_name == "A" & ada == "TRUE") |> 
  distinct(line, station_name) |> 
  nrow()
print(num_A_train_ADA)
```

    ## [1] 17

Therefore, 17 stations that serve the A train are ADA compliant.
